var QuickNav=function(){return{init:function(){if($(".quick-nav").length>0){var n=$(".quick-nav");n.each(function(){var n=$(this),t=n.find(".quick-nav-trigger");t.on("click",function(t){t.preventDefault();n.toggleClass("nav-is-visible")})});$(document).on("click",function(t){$(t.target).is(".quick-nav-trigger")||$(t.target).is(".quick-nav-trigger span")||n.removeClass("nav-is-visible")})}}}}(),AGA,AGATableExport;$(document).ready(function(){QuickNav.init()});AGA=AGA||{};AGA.log=function(n){console&&console.log&&console.log(n)};AGA.Menu=function(){function t(t,i){var u,f,r;for(t.uniqueId(),u=$(t).attr("id"),f=!1,r=0;r<n.length;r++)n[r].key===u&&(n[r].item!==i&&$(n[r].item).parent().removeClass("active"),n[r].item=i,f=!0);f||n.push({key:u,item:i})}function i(n){var i=$(n.target).parent().closest(".aga-tabs"),r,u,f;t(i,n.target);$(i.find("a")).removeClass("aga-a-active");$(i.find("span.aga-sel")).empty();$($(i).find("a")).removeClass("aga-a-active");r=$(n.target).parent().parent().hasClass("aga-tab-dropdown")?$(n.target).parent().parent():null;r!=null&&(u="#"+$(r).attr("aria-labelledby"),f=$(u).children().first(),$(u).children().length>2?f.next().text(" | "+$(n.target).text()):f.after('<span class="aga-sel aga-a-active"> | '+$(n.target).text()+"<\/span>"));$(n.target).closest("a").addClass("aga-a-active")}function r(n){var i=[],t=[];return $(n).children("li").each(function(n,r){var f=$(r).text(),e=f.indexOf(">"),u,o;e>0&&(u=f.substring(0,e),o=f.substring(e+1,100),t.indexOf(u)<0&&t.push(u),i.push({li:r,grupo:u,caption:o}))}),{todosLI:i,grupos:t}}function u(n,t){var r=document.createElement("li"),i=document.createElement("a"),f,u;return $(i).uniqueId(),$(i).addClass("dropdown-toggle").attr({href:"javascript:;","data-toggle":"dropdown","aria-expanded":"false"}).appendTo(r),f=document.createElement("span"),$(f).text(n).appendTo(i),$(document.createElement("i")).addClass("fa fa-angle-down").appendTo(i),u=document.createElement("ul"),$(u).addClass("dropdown-menu aga-tab-dropdown").attr({role:"menu","aria-labelledby":$(i).attr("id")}).appendTo(r),$(t).append(r),u}function f(n){var s=r(n),h=s.todosLI,e=s.grupos,i,o,c,f,t;if(e.length!==0)for(i=0;i<e.length;i++)for(o=e[i],c=u(o,n),f=0;f<h.length;f++)t=h[f],t.grupo===o&&($(t.li).find("a").first().text(t.caption),$(t.li).appendTo(c))}var n=[];return{init:function(){$(document).on("click","li.aga-li",i);AGA.Menu.breakMenus();AGA.Menu.activeFirstTabs()},activeFirstTabs:function(){$(".aga-tabs").each(function(){var t,n;$(this).find("li.active").length===0&&$(this.parentNode).closest(".tab-content").length===0&&(t=$(this).find("li"),t.length>0&&(n=$(this).find("li:first").find(":first-child"),n.find(":first-child").length===0?n.trigger("click"):n.find(":first-child").trigger("click")))})},breakMenus:function(){$("#ContentPanel .aga-tabs:not(.aga-breaked-menu)").each(function(n,t){$(t).addClass("aga-breaked-menu");f(t)})}}}();AGA.Helper=function(){var n=0,t=function(){n===0&&App.blockUI({textOnly:!1,message:"Carregando...",boxed:!0});n++},i=function(){n--;n===0&&App.unblockUI()},r=function(n,t,i){var r=$.extend({target:n,textOnly:!0,message:t,boxed:!0},i);App.blockUI(r)},u=function(n){App.unblockUI(n)},f=function(n){var t=n.getDate().toString(),i=(n.getMonth()+1).toString(),r=n.getFullYear();return t=t.length===1?"0"+t:t,i=i.length===1?"0"+i:i,t+"/"+i+"/"+r},e=function(n){var t=$(n).data("name");return t||(t=$(n).attr("id")),t},o=function(n,t,i){n&&!t&&(t=n,n="Mensagem");var r=i||function(){};Benner.ModalMessage.alert(n,t,r)};return{isNullValue:function(n){return typeof n=="undefined"||n===""||n===null},getDataName:e,getProps:function(n){var i="";for(var t in n)n.hasOwnProperty(t)&&(i+=t+"="+n[t]+"\n");return i},requestConfirmation:function(n,t,i){return AGA.Helper.requestConfirmationCustom({title:n,message:t,yesCallback:i})},requestConfirmationCustom:function(n){var t={title:"Confirmar",message:"Confirma a execução da operação?",yesCallback:function(){},noCallback:function(){},yesBtn:"Sim",noBtn:"Não"};$.extend(t,n);bootbox.dialog({title:t.title,message:t.message,onEscape:function(){bootbox.hideAll()},buttons:{success:{label:t.yesBtn,className:"green btn-primary",callback:t.yesCallback},main:{label:t.noBtn,className:"default",callback:t.noCallback}}})},invoke:function(n,t){if(!n)return!1;for(var r=n.split("."),i=window;r.length>0;){if(!i[r[0]])return AGA.log("AGA.Helper.invoke("+n+") - método não encontrado."),!1;i=i[r[0]];r.splice(0,1)}return i?(i(t),!0):(AGA.log("AGA.Helper.invoke("+n+") - método não encontrado."),!1)},createMessagePanel:function(n,t,i){var u,f,r,e,o,s;if(!n)return!1;if(typeof n=="string")if(f=$(n).first(),f.length>0)u=f[0];else return!1;else u=n;return r=document.createElement("div"),$(r).addClass("alert "+t),e=document.createElement("button"),$(e).addClass("close").attr("data-dismiss","alert").appendTo(r),o=i?i.replace(/(?:\r\n|\r|\n)/g,"<br />"):"",s=document.createElement("span"),$(s).html(o).appendTo(r),$(u).hide().removeClass("hide").empty().append(r).show(),!0},resolveElement:function(n){var t,i,r;return typeof n=="string"?n.length>0&&n[0]==="#"?(t=$(n),t.length>0)?t[0]:undefined:(i=document.getElementById(n),i)?i:(r=$('[data-name="'+n+'"]'),r.length>0)?r[0]:undefined:n},blockUI:t,unblockUI:i,blockElement:r,unblockElement:u,dateToStringDmy:f,alert:o}}();AGA.Loader=function(){function n(n,t){var i=document.createElement("script");i.setAttribute("type","text/javascript");i.setAttribute("src",n);t&&i.addEventListener("load",t);document.head.appendChild(i)}function t(n,t){var i=document.createElement("link");i.setAttribute("type","text/css");i.setAttribute("rel","stylesheet");i.setAttribute("href",n);t&&i.addEventListener("load",t);document.head.appendChild(i)}return{load:function(i,r){var u=$("#Wes2008ApplicationPath").val()+i,f=u.indexOf(".css")===-1;f?n(u,r):t(u,r)}}}();AGA.Form=function(){var n=[],i=function(t){n.push(t)},r=function(n,t){var i="."+t.getControlClass();return $(n).find(i)},t=function(t,i){for(var e,o,f,u=0;u<n.length;u++)for(e=n[u],o=r(t,e),f=0;f<o.length;f++)i(e,o[f])};return{addControl:i,getValues:function(n){var i={},r=AGA.Helper.resolveElement(n);return $(r).closest(".aga-form").each(function(n,r){t(r,function(n,t){var f=n.isNull(t),r,u;f||(r=AGA.Helper.getDataName(t),u=n.getValue(t),i[r]=u)})}),i},dispatchChange:function(n,t){var u=$(n).data("changeCallback"),i=undefined,r,f;return($(n).closest(".aga-form").first().each(function(n,t){i=$(t).data("changeCallback")}),u||i)?(r=$(n).data("name"),AGA.log(r+".Change"),f=$.extend({name:r},t()),u&&AGA.Helper.invoke(u,f),i&&AGA.Helper.invoke(i,f),AGA.log(r+".Changed"),!0):!1},setReadOnly:function(n,i){var r=AGA.Helper.resolveElement(n);r&&(i?$(r).attr("readonly","readonly"):$(r).removeAttr("readonly"),t(r,function(n,t){n.setReadOnly(t,i)}))},initAll:function(){$(".aga-form[readonly]").each(function(n,t){AGA.Form.setReadOnly(t,!0)})}}}();AGA.BaseInputControl=function(){var t=function(n){AGA.Form.dispatchChange(n,function(){var t=$(n).val();return{target:n,currentTarget:n,value:t,isNull:AGA.Helper.isNullValue(t)}})},n=function(n){var t=AGA.Helper.resolveElement(n);return t?$(t).val():null},i=function(t){var i=n(t);return AGA.Helper.isNullValue(i)},r=function(n,t){var i=AGA.Helper.resolveElement(n);i&&$(i).val(t)},u=function(n){var t=AGA.Helper.resolveElement(n);t&&$(t).val("")},f=function(n){var t=AGA.Helper.resolveElement(n);return t&&t.disabled},e=function(n,t){var i=AGA.Helper.resolveElement(n);i&&(i.disabled=t)};return{internalChange:t,getValue:n,setValue:r,isNull:i,clear:u,getReadOnly:f,setReadOnly:e}};AGA.Lookup=function(){function c(n,t,i){AGA.Form.dispatchChange(i.currentTarget,function(){var r=AGA.Lookup.getValue(n);return{target:i.currentTarget,currentTarget:i.currentTarget,handle:r,value:r,isNull:t}})}function r(n){var t=AGA.Lookup.isNull(n.currentTarget);c(n.currentTarget,t,n);$(".aga-lookup[data-depend='"+$(n.currentTarget).data("name")+"']").each(function(n,i){AGA.Lookup.clear(i);AGA.Lookup.setReadOnly(i,t)})}function l(n,t,i){return n.status===401?n.statusText:n.responseText.indexOf("wesLogin")>0?"Sua sessão expirou. Faça o login novamente.":n.responseJSON===undefined?i:!n.responseJSON.ExceptionMessage||!n.responseJSON.ExceptionMessage.length?!n.responseJSON.Message||!n.responseJSON.Message.length?i:n.responseJSON.Message:n.responseJSON.ExceptionMessage}function a(n){return n&&n.attributes["data-definition"]!==undefined}function v(t,i){return t?i?n.multipleServer:n.multipleClient:i?n.singleServer:n.singleClient}function y(n){var t,u,f;h();t=s(n);u=$(n).select2(t);$(n).val(null).trigger("change.select2");u.on("change",r);$(u).on("select2:close",function(){$(this).focus()});f=v(t.multiple,a(n));$(n).data("kind",f);($(n).data("depend")||n.hasAttribute("readonly"))&&i(n).setReadOnly(n,!0);$(n).data("focus")&&$(n).select2("focus")}function i(n){if(n){var i=$(n).data("kind");return t[i]}return undefined}var f=!1,o=function(){if(!f){var t=document.createElement("style"),n=document.createTextNode(".select2-container.aga-lookup {position: relative;z-index: auto;float: left;width: 100%;margin-bottom: 0;display: table;table-layout: fixed;}");t.appendChild(n);n=document.createTextNode("select.aga-lookup {height:30px;}");t.appendChild(n);n=document.createTextNode(".aga-form .form-group{min-height:53px;}");t.appendChild(n);document.head.appendChild(t);f=!0}},s=function(n){var r=function(){return n&&n.attributes["data-definition"]!==undefined},u=function(n){var t=$(n).data("required");return t===!1?!0:t&&t.toLowerCase()==="false"?!0:!1},f=function(n){var r="",t=AGA.Form.getValues(n);for(var i in t)t.hasOwnProperty(i)&&(r+=i+"="+t[i]+"|");return r},e=function(){var i=$("#Wes2008ApplicationPath").val()+"api/AGALookup",t=30;return{url:i,dataType:"json",quietMillis:250,data:function(i){i.term===undefined&&(i.term="");i.page=i.page||1;var r={};return r.def=$(this).data("definition"),r.frmValues=f(n),r.userText=i.term,r.firstIndex=(i.page-1)*t,r.count=t,r},processResults:function(n){return{results:$.map(n.Items,function(n){return{id:n.id,text:n.desc}}),pagination:{more:n.More==="S"}}},cache:!0}},t={allowClear:u(n),width:"100%",multiple:$(n).data("multiple")&&$(n).data("multiple").toString().toLowerCase()==="true",language:"pt-BR"},i;return r()&&(t.ajax=e(n),t.formatAjaxError=l,t.escapeMarkup=function(n){return n},t.formatResult=function(n){return n.desc},t.formatSelection=function(n){return n.desc},t.multiple&&(t.closeOnSelect=!1,t.maximumSelectionSize=50,t.maximumSelectionLength=50),$(n).val("")),i=$(n).data("placeholder"),i&&(t.placeholder=i),t},e=function(n){var t=$(n).data("depend");return t&&AGA.Lookup.isNull(t)},n={singleServer:"singleServer",singleClient:"singleClient",multipleServer:"multipleServer",multipleClient:"multipleClient"},t={},h=function(){var i,r,u;t[n.singleServer]||(i=function(){var n=function(n){return AGA.Helper.isNullValue($(n).val())};return{getValue:function(n){var t=$(n).val();return AGA.Helper.isNullValue(t)?-1:parseInt(t)},setValue:function(n,t,i){if($(n).val()===t.toString())return!1;i=i||"?";var r=$("<option selected>"+i+"<\/option>").val(t);return $(n).append(r),!0},clear:function(t){n(t)||$(t).find("option").detach()},isNull:n,getReadOnly:function(n){return $(n).attr("readonly")?!0:!1},setReadOnly:function(n,t){if(t||!e(n)){t?$(n).attr("readonly","readonly"):$(n).removeAttr("readonly");$(n).prop("disabled",t);var i=n.parentNode;$(i).hasClass("input-group")&&$(i).find(".aga-btn-clear").toggleClass("disabled",t)}}}},t[n.singleServer]=i(),t[n.singleClient]=i(),t[n.singleClient].setValue=function(n,t){return $(n).val()===t.toString()?!1:($(n).val(t).trigger("change.select2"),!0)},t[n.singleClient].clear=function(n){$(n).val("").trigger("change.select2")},r=function(n,t){return n instanceof Array?n.map(function(n,i){return{id:n,desc:t[i]}}):[{id:n,desc:t}]},u=function(){var i=function(n){return AGA.Helper.isNullValue($(n).val())},n=function(n){$(n).find("option").detach()},t=function(n,t,i){var u=r(t,i);return u.length>0&&$(n).append(u.map(function(n){return $("<option selected>"+n.desc+"<\/option>").val(n.id)})),!0};return{getValue:function(n){var t=$(n).val();return t instanceof Array?t.join(","):typeof t=="undefined"||t===null?"":t},setInternalValue:t,setValue:function(i,r,u){return n(i),t(i,r,u)},clear:n,isNull:i,getReadOnly:function(n){return $(n).attr("readonly")?!0:!1},setReadOnly:function(n,t){if(t||!e(n)){t?$(n).attr("readonly","readonly"):$(n).removeAttr("readonly");$(n).prop("disabled",t);var i=n.parentNode;$(i).hasClass("input-group")&&$(i).find(".aga-btn-clear").toggleClass("disabled",t)}}}},t[n.multipleServer]=u(),t[n.multipleClient]=u(),t[n.multipleClient].clear=function(n){$(n).val("").trigger("change.select2")},t[n.multipleClient].setValue=function(n,t,i){var u=r(t,i),f=u.map(function(n){return n.id});return $(n).val(f).trigger("change.select2"),!0})},u=function(n,t,u){var f=AGA.Helper.resolveElement(n);i(f).setValue(f,t,u)&&r({currentTarget:f})},p=function(n){var t=$(n).data("initialValue"),i,r;t&&(i=parseInt(t),r=$(n).data("initialText"),u(n,i,r),$(n).removeData("initialValue"),$(n).removeData("initialText"))},w=function(n){var r=$(n).data("multipleInitialValue"),t,i;if(r){var f=[],e=[],o=r.split("|");for(t=0;t<o.length;t++)i=o[t].split("="),i.length>1&&(f.push(parseInt(i[0])),e.push(i[1]));u(n,f,e)}},b=function(){$(".aga-lookup[data-initial-value]").each(function(n,t){p(t)});$(".aga-lookup[data-multiple-initial-value]").each(function(n,t){w(t)})},k=function(n){var t="aga-initialized";$(n).hasClass(t)||($(n).addClass(t),y(n),o())},d=function(){$(".aga-lookup:not(.aga-initialized)").each(function(n,t){AGA.Lookup.init(t)});b()};return{initAll:d,init:k,setReadOnly:function(n,t){var r=AGA.Helper.resolveElement(n);i(r).setReadOnly(r,t)},getReadOnly:function(n){var t=AGA.Helper.resolveElement(n);return i(t).getReadOnly(t)},getValue:function(n){var t=AGA.Helper.resolveElement(n);return i(t).getValue(t)},setValue:u,clear:function(n){var t=AGA.Helper.resolveElement(n),u=i(t);u.isNull(t)||(u.clear(t),r({currentTarget:t}))},isNull:function(n){var t=AGA.Helper.resolveElement(n);return i(t).isNull(t)},getControlClass:function(){return"aga-lookup"}}}();AGA.Form.addControl(AGA.Lookup);AGA.Text=function(){var t=AGA.BaseInputControl(),n=$.extend({},t);return n.getControlClass=function(){return"aga-text"},n}();AGA.Form.addControl(AGA.Text);AGA.Number=function(){var i=AGA.BaseInputControl(),n=$.extend({},i),t=function(n){var t=$(n).autoNumeric("get"),i;return t===""?0:(i=$(n).attr("data-m-dec"),i==="0"||i===0)?parseInt(t):parseFloat(t)};return n.getValue=function(n){var i=AGA.Helper.resolveElement(n);return i?t(i):0},n.setValue=function(n,t){var i=AGA.Helper.resolveElement(n);i&&$(i).autoNumeric("set",t)},n.internalChange=function(n){AGA.Form.dispatchChange(n,function(){var i=t(n);return{target:n,currentTarget:n,value:i,isNull:!1}})},n.clear=function(t){n.setValue(t,0)},n.getControlClass=function(){return"aga-number"},n}();AGA.Form.addControl(AGA.Number);AGA.Date=function(){var t=AGA.BaseInputControl(),n=$.extend({},t);return n.setValue=function(n,i){var r=i instanceof Date?AGA.Helper.dateToStringDmy(i):i;t.setValue(n,r)},n.getValue=function(n){var e=AGA.Helper.resolveElement(n),r=t.getValue(n),i,u,f;if(r.length==0)return"";if(i=r.split("/"),f=new Date,i.length==3)u=new Date(parseInt(i[2]),parseInt(i[1])-1,parseInt(i[0]));else if(i.length==2)u=new Date(parseInt(i[1]),parseInt(i[0])-1);else if(i.length==1)if($(e).data("date-format")=="yyyy"){if(r.length!=4||parseInt(r)==0)return"";u=new Date(parseInt(r),0)}else{if(r.length==0||(r.length==1&&(r="0"+r),parseInt(r)==0))return"";if($(e).data("date-format")=="mm/yyyy")if(r.length>=3){if(i[0]=r.substring(0,2),i[1]=r.substring(2),i[1].length==1||i[1].length==3)return"";i[1].length==2&&(i[1]=parseInt(i[1])+2e3);u=new Date(parseInt(i[1]),parseInt(i[0])-1)}else r.length==2&&(u=new Date(parseInt(f.getFullYear()),parseInt(r)-1));else if(r.length==2)u=new Date(parseInt(f.getFullYear()),parseInt(f.getMonth()),parseInt(r));else if(r.length>=3&&r.length<=4){if(i[0]=r.substring(0,2),i[1]=r.substring(2),i[1].length==1)return"";u=new Date(parseInt(f.getFullYear()),parseInt(i[1])-1,parseInt(i[0]))}else{if(i[0]=r.substring(0,2),i[1]=r.substring(2,4),i[2]=r.substring(4),i[2].length==2)i[2]=2e3+parseInt(i[2]);else if(i[2].length!=4)return"";u=new Date(parseInt(i[2]),parseInt(i[1])-1,parseInt(i[0]))}}return(u.getDate()<10?"0":"")+u.getDate()+"/"+(u.getMonth()+1<10?"0":"")+(u.getMonth()+1)+"/"+u.getFullYear()},n.setReadOnly=function(n,i){var r=AGA.Helper.resolveElement(n),u;r&&(u=r.parentNode,$(u).hasClass("input-group")&&$(u).find("button").each(function(n,t){t.disabled=i}));t.setReadOnly(r,i)},n.getControlClass=function(){return"aga-date"},n}();AGA.Form.addControl(AGA.Date);AGA.Checkbox=function(){var t=function(n){var t=AGA.Helper.resolveElement(n);return t.checked},n=function(n,t){var i=AGA.Helper.resolveElement(n);i.checked=t},i=function(n){AGA.Form.dispatchChange(n,function(){return{target:n,currentTarget:n,value:n.checked,isNull:!1}})},r=function(n){var t=AGA.Helper.resolveElement(n);return t.disabled},u=function(n,t){var i=AGA.Helper.resolveElement(n);i.disabled=t;$(i).parent().toggleClass("mt-checkbox-disabled",t)},f=function(){return!1},e=function(t){n(t,!1)},o=function(){return"aga-checkbox"};return{internalChange:i,getValue:t,setValue:n,clear:e,isNull:f,getReadOnly:r,setReadOnly:u,getControlClass:o}}();AGA.Form.addControl(AGA.Checkbox);AGA.Radio=function(){var n="",t=function(t){var r=AGA.Helper.resolveElement(t),i=n;return $(r).find("input").each(function(n,t){t.checked&&(i=t.value)}),i},i=function(n,t){var i=AGA.Helper.resolveElement(n);$(i).find("input").each(function(n,i){var r=i.value===t;i.checked=r;$(i).parent().toggleClass("active",r);r?$(i).attr("checked","checked"):$(i).removeAttr("checked")})},r=function(n){i(n,null)},u=function(i){return t(i)===n},f=function(n){AGA.Form.dispatchChange(n,function(){var t=AGA.Radio.getValue(n);return{target:n,currentTarget:n,value:t,isNull:AGA.Helper.isNullValue(t)}})},e=function(n){var t=AGA.Helper.resolveElement(n);return t.disabled},o=function(n,t){var i=AGA.Helper.resolveElement(n);i.disabled=t;$(i).children("label").each(function(n,i){t?($(i).attr("disabled","disabled"),$(i).addClass("mt-radio-disabled"),$(i).children("input").each(function(n,t){$(t).attr("disabled","disabled")})):($(i).removeAttr("disabled"),$(i).removeClass("mt-radio-disabled"),$(i).children("input").each(function(n,t){$(t).removeAttr("disabled")}))})},s=function(){return"aga-radio"};return{internalChange:f,getValue:t,setValue:i,clear:r,getReadOnly:e,setReadOnly:o,isNull:u,getControlClass:s}}();AGA.Form.addControl(AGA.Radio);AGA.Ajax=function(){function u(n){var t,i;for(t in n)if(n.hasOwnProperty(t)&&t!=="operation"&&t!=="parameters"&&t!=="panelId"&&t!=="messagePanel"&&t!=="success"&&t!=="error"&&t!=="abort"){i="Parâmetro "+t+" não é válido para callOperation.";AGA.log(i);throw Error(i);}}function n(n,t){var i,r;return n.panelId&&n.panelId.length>0?(r=n.panelId[0]==="#"?n.panelId:"#"+n.panelId,i=$(r).first()):n.messagePanel&&typeof n.messagePanel=="object"&&(i=n.messagePanel),i&&t&&t(i),i}function t(t,i,r){n(t,function(n){AGA.Helper.createMessagePanel(n,i,r)})}function f(t){n(t,function(n){$(n).empty()})}function i(n,i){i&&i.length>0&&t(n,"alert-warning",i);n.error&&n.error(i)}function e(n,i){i&&i.Mensagem&&i.Mensagem.length>0&&t(n,"alert-info",i.Mensagem);n.success&&n.success(i.Mensagem,i.Resultado)}function r(n,t){AGA.Ajax.callWebMethodBlocked("AGAOperation",{operationName:n.operation,consisted:t?0:1,parameters:n.parameters},function(t){var u=t.d;u.Tipo==="advertencia"?AGA.Helper.requestConfirmationCustom({message:u.Mensagem,yesCallback:function(){r(n,!1)},noCallback:function(){n.abort&&n.abort()}}):u.Tipo==="inconsistencia"||u.Tipo==="erro"?i(n,u.Mensagem):u.Tipo==="sucesso"&&e(n,u)},function(t,r){i(n,r)})}return{callWebMethod:function(n,t,i,r){var f=window.location.href.split("?")[0],u;f=f.split("#")[0]+"/"+n;u={type:"POST",url:f,dataType:"json",contentType:"application/json"};t&&(u.data=JSON.stringify(t));i&&(u.success=i);r&&(u.error=function(n){var t=AGA.Ajax.getErrorMessage(n);r(n,t)});$.ajax(u)},callWebMethodBlocked:function(n,t,i,r){AGA.Helper.blockUI();try{AGA.Ajax.callWebMethod(n,t,function(n){try{i(n)}finally{AGA.Helper.unblockUI()}},function(n,t){AGA.Helper.unblockUI();r&&r(n,t)})}catch(u){AGA.Helper.unblockUI();throw u;}},callOperation:function(n){u(n);f(n);r(n,!0)},getErrorMessage:function(n){var t="Não foi possível executar a operação.",i;return n.responseJSON&&n.responseJSON.Message&&(t=n.responseJSON.Message),n.responseText&&n.responseText.indexOf("lblErrorMessage")>0&&(i=$(n.responseText).find("#lblErrorMessage").text(),i&&(t=i)),t},getUrlPath:function(n){return $("#Wes2008ApplicationPath").val()+n}}}();AGA.Grid=function(){function r(n){return n===1?"text-center":n===2?"text-right":undefined}function u(n,t){if(!n)return t;if(AGA.Helper.isNullValue(t))return"";var u=t<0?"-":"",i=Math.abs(t).toString(),r=i.indexOf(".");for(r<0&&(i+=".",r=i.length-1);i.length<=r+n;)i+="0";return(i=i.replace(".",","),r>3)?u+i.substr(0,r-3)+"."+i.substr(r-3):u+i}function f(n){var t={call:function(){}},i=$(n).data("afterrenderrow");return i&&(t.grid=n,t.evt=i,t.call=function(t,r){AGA.Helper.invoke(i,{grid:n,tr:t,record:r})}),t}function e(n,t){var v=$(n).find("table tbody"),s,y,a,h,i,e,c,o,l;for($(v).empty(),s=[],$(n).find("tr.header > th").each(function(n,t){s.push({name:$(t).data("field"),decs:$(t).data("decs"),alignment:r($(t).data("alignment")),cmdTemplate:$(t).find(".cmd-template").first()})}),y=f(n),a=t.StartIndex||0,h=0;h<t.Rows.length;h++){for(i=AGA.Grid.getRecord(t,h),e=document.createElement("tr"),i.HANDLE&&$(e).data("handle",i.HANDLE),i.URL&&$(e).data("url",i.URL),$(e).data("index",a).appendTo(v),a++,c=0;c<s.length;c++)o=s[c],l=document.createElement("td"),o.alignment&&$(l).addClass(o.alignment),o.cmdTemplate.length>0?$(l).html($(o.cmdTemplate[0]).html()).appendTo(e):$(l).html(u(o.decs,i[o.name])).appendTo(e);y.call(e,i)}}function o(n,t){var i=t.StartIndex,f=t.More;$(n).data("current",i);var r=i>0,u=f,e=r||u;$(n).find(".grid-footer-row").toggleClass("hide",!e);$(n).find(".previous").toggleClass("hide",!r);$(n).find(".next").toggleClass("hide",!u)}function s(n){var t=$(n).data("pagesize");return t?t:10}function h(n){var t=$(n).data("current");return t?t:0}function n(n,t){var r=$(n).closest(".aga-grid"),f=h(r),e=s(r),u=f+t*e;u<0&&(u=0);$(r).data("current",u);i(r)}function t(n,t,i){var r=$(n).data(t);r&&AGA.Helper.invoke(r,{grid:n,eventName:t,gridData:i})}function i(n,i){var r,u;t(n,"beforeload");r=function(i){e(n,i);o(n,i);AGA.Grid.hideMessagePanel(n);$(n).show();t(n,"afterload",i)};AGA.Helper.isNullValue(i)?(u=AGA.Grid.getCallParameters(n),AGA.Ajax.callWebMethod("AGAGridGet",u,function(n){r(n.d)},function(t){var i=AGA.Ajax.getErrorMessage(t);AGA.Helper.createMessagePanel($(n).find(".message-panel").first()[0],"alert-danger",i);$(n).show()})):r(i)}return{initAll:function(){$(".aga-grid.auto-load").each(function(n,t){AGA.Grid.load(t)})},hideMessagePanel:function(n){$(AGA.Helper.resolveElement(n)).find(".message-panel").addClass("hide")},load:function(n,t){var r=$(AGA.Helper.resolveElement(n)).closest(".aga-grid");$(r).data("current",0);i(r,t)},getCallParameters:function(n){var t=AGA.Helper.resolveElement(n),i={},r=$(t).data("formfilter");r&&(i=AGA.Form.getValues("#"+r));var o=$(t).data("method"),s=$(t).data("pagesize"),u=$(t).data("order"),f=$(t).data("orderdesc"),e=$(t).data("current");return{method:o,fields:i,startIndex:e?e:0,count:s,orderField:u?u:"",descending:f?f:0}},getRecord:function(n,t){return n.Columns.reduce(function(i,r,u){return i[r]=n.Rows[t][u],i},{})},nextPage:function(t){n(t,1)},priorPage:function(t){n(t,-1)},sort:function(n){var t=$(n).closest("th"),u=$(t).data("field"),r=0,i;$(t).data("sort")==="asc"?($(t).data("sort","desc"),r=1):$(t).data("sort","asc");i=$(t).closest(".aga-grid");$(i).data({order:u,orderdesc:r,current:0});AGA.Grid.load(i)},cmdRowClick:function(n){var i=$(n).closest("a"),t=$(i).data("client");return t&&AGA.Helper.invoke(t,n),t=$(i).data("server"),t&&alert("Chamar o servidor "+t),!1},cmdClick:function(n){var i=$(n).closest("a"),t=$(i).data("client");return t&&AGA.Helper.invoke(t,i),t=$(i).data("server"),t&&alert("Chamar o servidor "+t),!1},download:function(n,t){var i=$(n).closest(".aga-grid").find("table").first();t&&t.toLowerCase()==="xlsx"&&AGATableExport.clickHandlerXLSX({target:i,currentTarget:i});t&&t.toLowerCase()==="csv"&&AGATableExport.clickHandlerCSV({target:i,currentTarget:i})},enableCommand:function(n){$(n).removeClass("disabled").removeAttr("disabled")},disableCommand:function(n){$(n).addClass("disabled").attr("disabled","disabled")}}}();AGA.TextDecorator=function(){function n(n,t){var i=$(n).text();return i.length>0?($(t).text($(t).text()+i[0]),$(n).text(i.substring(1)),!0):!1}return{fromToClass:function(t,i,r,u,f){var o,s,e,h;if(!i||i.length===0){f&&f();return}o=document.createElement("span");s=document.createElement("span");$(o).addClass(u).text("").appendTo(t);$(s).addClass(r).text(i).appendTo(t);e=300/i.length;e<5&&(e=5);h=function(t,i,r){setTimeout(function(){n(t,i)?h(t,i,r):r&&r()},e)};h(s,o,f)}}}(),function(){$(document).ready(function(){AGA.Menu.init();AGA.Lookup.initAll();AGA.Grid.initAll();AGA.Form.initAll()})}();AGA=AGA||{};AGA.Tile=function(){function f(n){var t="dashboard-stat aga-tile "+n.CssClass;switch(n.Size){case 1:return t+" tile-small";case 2:return t+" tile-big";default:return t+" tile-default"}}function t(n,t){var r=document.createElement("div"),u,i,f,e;$(r).addClass("visual").appendTo(n);u=document.createElement("i");$(u).addClass("fa "+t.FontIcon).appendTo(r);i=document.createElement("div");$(i).addClass("details").appendTo(n);f=document.createElement("div");$(f).addClass("number").text(t.Value).appendTo(i);e=document.createElement("div");$(e).addClass("desc").html(t.Name).appendTo(i)}function e(n){var i=document.createElement("a");return $(i).attr("href","javascript:;"),n.UrlTarget&&$(i).attr("data-urltarget",n.UrlTarget),n.Url&&$(i).attr("data-url",n.Url),t(i,n),i}function o(n){var i=document.createElement("div");return t(i,n),i}function s(n){return AGA.Helper.isNullValue(n.Url)&&AGA.Helper.isNullValue(n.ScriptClickCallback)?o(n):e(n)}function h(n,t){var i=s(t);$(i).addClass(f(t));t.Uid&&$(i).attr("data-uid",t.Uid);t.ScriptClickCallback&&$(i).attr("data-clickcallback",t.ScriptClickCallback);t.UpdateTypeCallback&&$(i).attr("data-updatecallback",t.UpdateTypeCallback);$(n).append(i)}function c(n){switch(n){case 1:return"col-lg-2 col-md-3 col-sm-3 col-xs-6";case 2:return"col-lg-4 col-md-6 col-sm-12 col-xs-12";default:return"col-lg-3 col-md-4 col-sm-6 col-xs-12"}}var n=!1,u={Uid:"",Value:"",Name:"",CssClass:"",FontIcon:"",Url:"",UrlTarget:0,ScriptClickCallback:"",UpdateTypeCallback:"",Size:0},i=function(n){var i=$.extend(u,n),t=document.createElement("div");return $(t).addClass(c(i.Size)),h($(t),i),t},l=function(n,t){return{url:n,id:"aga-tile-modal",size:t,height:750,displayFooter:!1,displayTitle:!1,title:""}},a=function(n,t){var i,r,u;if(n){if(!t||parseInt(t)===0){window.location.href=n;return}i="default";r=parseInt(t);r===2?i="large":r===3&&(i="fullpage");u=l(n,i);Benner.ModalPage.show(u,Benner.WidgetCommandsBar.openModal,Benner.WidgetCommandsBar.disposeModal)}},v=function(n){var t=$(n.currentTarget),i=$(t).data("clickcallback"),r,u;i&&AGA.Helper.invoke(i,n);r=$(t).data("url");u=$(t).data("urltarget");a(r,u)},y=function(){if(!n)$("body").on("click",".aga-tile",v);n=!0},r=function(n){var t=$(n).data("updatecallback"),r=AGA.Ajax.getUrlPath("api/AGATile");$(n).find(".number").html('<i class="fa fa-spinner fa-pulse"><\/i>');$.ajax({url:r,data:{updateCallback:t},dataType:"json",cache:!1,success:function(t){var r=i(t);$(n).parent().html($(r).html())},error:function(t,i,r){var u=AGA.Ajax.getErrorMessage(r);$(n).find(".visual").empty();$(n).find(".details > .number > i").addClass("fa-warning").removeClass("fa-spinner fa-pulse");$(n).find(".details .desc").text(u)}})},p=function(){$(".aga-tile[data-updatecallback]").each(function(n,t){r(t)})},w=function(){$(".aga-tile[data-updaterequired]").each(function(n,t){r(t)})};return{init:y,render:i,updateAll:p,updateAllRequired:w}}();$(document).ready(function(){AGA.Tile.init();AGA.Tile.updateAllRequired()});AGA=AGA||{};AGA.JavascriptButton=function(){var i=function(n){var t=$(n).data("callback");t&&AGA.Helper.invoke(t,n)},n=function(n){var t=AGA.Helper.resolveElement(n);t&&$(t).removeAttr("disabled").removeClass("disabled")},t=function(n){var t=AGA.Helper.resolveElement(n);t&&$(t).attr("disabled","disabled")},r=function(i,r){r?n(i):t(i)};return{click:i,enable:n,disable:t,setEnabled:r}}();AGA=AGA||{};AGA.QuickNav=function(){var n=function(n){$(".quick-nav-placeholder").fadeOut(200,function(){$(this).remove()});n&&n.length>0&&($("form").first().after(n),QuickNav.init())},t=function(){var t=AGA.Ajax.getUrlPath("api/QuickNav");$.ajax({url:t,cache:!1,success:function(t){n(t)}})};return{update:t}}();AGA.TableCreator=function(n){function f(n){var i={name:t.length.toString(),title:"",setValue:o},u=typeof n;return u==="string"?i.title=n:u==="object"&&$.extend(i,n),i.th=document.createElement("th"),i.title&&($.isFunction(i.title)?i.title(i.th):$(i.th).text(i.title)),r.appendChild(i.th),t.push(i),i}function e(n){if(!n)return undefined;if(typeof n=="number")return t[n];for(var i=0;i<t.length;i++)if(t[i].name===n)return t[i];return undefined}function o(n,t,i){t&&t[i]&&$(n).text(t[i])}var u=document.createElement("table"),i,r,t;return n&&$(u).attr(n),i=document.createElement("tbody"),u.appendChild(i),r=document.createElement("tr"),$(r).appendTo(i),t=[],{table:u,headerRow:r,addColumns:function(n){var i,t;if(n){if(n instanceof Array){for(i=[],t=0;t<n.length;t++)i.push(f(n[t]));return i}return f(n)}return undefined},getHeaderCell:function(n){var t=e(n);return t?t.th:undefined},addRow:function(n){var f=document.createElement("tr"),r,u;for($(f).appendTo(i),r=0;r<t.length;r++)u=document.createElement("td"),t[r].setValue(u,n,t[r].name),t[r].attributes&&$(u).attr(t[r].attributes),$(u).appendTo(f);return function(n,i){var r=i,u=n;return{getCell:function(n){if(!n)return undefined;if(typeof n=="number")return r.children[n];for(var i=0;i<t.length;i++)if(u[i].name===n)return r.children[i];return undefined}}}(t,f)}}};AGA.Memo=function(){var t=AGA.BaseInputControl(),n=$.extend({},t);return n.getControlClass=function(){return"aga-memo"},n}();AGA.Form.addControl(AGA.Memo);AGA.Toastr=function(){function i(n){return{BottomRight:"toast-bottom-right",BottomLeft:"toast-bottom-left",TopLeft:"toast-top-left",TopCenter:"toast-top-center",BottomCenter:"toast-bottom-center",TopFullWidth:"toast-top-full-width",BottomFullWidth:"toast-bottom-full-width",TopRight:"toast-top-right"}[n]||"toast-top-right"}function r(n){return{Success:"success",Info:"info",Warning:"warning",Error:"error"}[n]||"success"}function u(n){var t={url:n,id:"aga-tile-modal",size:"large",height:750,displayFooter:!1,displayTitle:!1,title:""};Benner.ModalPage.show(t,Benner.WidgetCommandsBar.openModal,Benner.WidgetCommandsBar.disposeModal)}function f(n){var t=n.url,i=n.urlTarget;return function(){i==="Modal"&&u(t)}}function e(t){var i=t.url,r=t.urlTarget,u=t.message,f=n[r]||n.Default;return f.replace("%url%",i).replace("%message%",u)}function o(n){n=$.extend({},t,n);toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,positionClass:i(n.position),onclick:f(n),showDuration:1e3,hideDuration:1e3,timeOut:n.timeout,extendedTimeOut:0,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};toastr[r(n.kind)](e(n),n.title)}var t={kind:"Success",position:"BottomRight",timeout:0,title:"",message:"",url:"",urlTarget:"Navigate"},n={Navigate:'<a href="%url%">%message%<\/a>',BlankPage:'<a href="%url%" target="_blank">%message%<\/a>',Modal:"%message%",Default:"%message%"},s=function(){$(".aga-toastr").each(function(n,t){var i={kind:$(t).data("kind"),position:$(t).data("position"),timeout:$(t).data("timeout"),title:$(t).data("title"),message:$(t).data("message"),url:$(t).data("url"),urlTarget:$(t).data("urlTarget")};AGA.Toastr.show(i);$(t).detach()})};return{show:o,showAll:s}}();$(document).ready(function(){AGA.Toastr.showAll()});AGA.UserConfirmation=function(){function r(n){AGA.Ajax.callWebMethodBlocked(n,{parametro:t.handle},function(){i()},function(n,t){alert(t);i()})}function u(){r("AgaUserConfirmationYes")}function f(){r("AgaUserConfirmationNo")}function i(){n.length!==0&&(t=n[0],n=n.slice(1),AGA.Helper.requestConfirmationCustom({title:"Confirmação solicitada",message:t.message,yesCallback:u,noCallback:f}))}function e(){var t=$(".aga-user-confirmation");t.length!==0&&(n=t.map(function(n,t){return{handle:$(t).data("handle"),message:$(t).html()}}),$(".aga-user-confirmation").detach(),i())}var n=[],t=null;return{showAll:e}}();$(document).ready(function(){AGA.UserConfirmation.showAll()});AGA=AGA||{};AGA.Schedule=function(){var i={autoInit:"aga-autoinit",noPerson:"aga-no-schedule-person",needUpdate:"aga-need-update"},n={calendar:".aga-calendar",calendarBody:".aga-calendar-body",calendarPlaceHolder:".aga-calendar-placeholder",needUpdate:".aga-need-update"},r=function(n,t){var i,r;return n.hour()!==0&&n.minute()!==0?!1:(i=t.hour(),i!==0&&i!==23)?!1:(r=t.minute(),r!==0&&r!==59)?!1:!0},t=function(t){return $(t).closest(n.calendar)},f=function(n){return $(n).find("[data-name='SCHEDULE_LOOKUP']")},e=function(n){return $(n).find("[data-name='SCHEDULE_PERSON']")},o=function(n){return!$(n).hasClass(i.noPerson)},s=function(n,t,i,r){var u=r?"&dt="+r.format("YYYYMMDDHHmmss"):"";return AGA.Ajax.getUrlPath("aga/a/agenda/eventoagenda.aspx?imp=1&s="+n+"&pe="+i+"&e="+t+u)},a=function(n){var t=$(n).data("readonly")==="S"||$(n).data("interval")==="S";$(".aga-schedule-new-event").toggleClass("hide",t)},v=function(i){var r=t(i);(a(r),$(r).hasClass("blocked"))&&$(r).removeClass("blocked").find(n.calendarPlaceHolder).each(function(n,t){AGA.Helper.unblockElement(t)})},h=function(i){var r=t(i);$(r).hasClass("blocked")||($(r).addClass("blocked"),AGA.Helper.blockElement($(r).find(n.calendarPlaceHolder)[0],"Selecione acima a agenda desejada"),$(".aga-schedule-new-event").addClass("hide"))},c=function(n){var u=t(n),s=f(u),i=!s||AGA.Lookup.isNull(s),r;return i||(r=e(u),o(r)&&(i=AGA.Lookup.isNull(r))),!i},y=function(n){var i=t(n),u=f(i),r=e(i),s=o(r)?AGA.Lookup.getValue(r):0;return{schedule:AGA.Lookup.getValue(u),person:s}},p=function(n,t){var r='<div class="row"><label class="col-md-3">%label%<\/label><div class="col-md-9 bold">%value%<\/div><\/div>',i=function(n,t){return r.replace("%label%",n).replace("%value%",t)};return i("Período:",n)+i("Descrição:",t)},w=function(n){var t=n;return function(n,i,u,f){var o=c(t),e;o?(e=y(t),e.start=n.format("DD/MM/YYYY"),e.end=i.format("DD/MM/YYYY"),$.ajax({url:AGA.Ajax.getUrlPath("api/AGAAgendaProvider"),data:e,cache:!1,dataType:"json",success:function(n){var i,u;if($(t).data("hash",n.ScheduleHash),$(t).data("person",n.PersonHash),$(t).data("readonly",n.ReadOnly),$(t).data("interval",n.Interval&&n.Interval>0?"S":"N"),i=n.Events.map(function(t){var i=moment(t.Range.s),u=moment(t.Range.e);return{id:t.Id,start:i,end:u,title:t.Title,allDay:r(i,u),schedule:n.ScheduleHash,person:n.PersonHash,backgroundColor:"#69a4e0",endOfScale:t.eos}}),n.Availabilities&&n.Availabilities.length)for(u=0;u<n.Availabilities.length;u++){var e=n.Availabilities[u],o=moment(e.s),s=moment(e.e);i.push({id:"new",start:o,end:s,title:"Disponível",allDay:r(o,s),schedule:n.ScheduleHash,person:n.PersonHash,backgroundColor:"#1bbc9b",endOfScale:e.eos})}n.Unavailabilities&&n.Unavailabilities.length&&n.Unavailabilities.map(function(n){n.Ranges.map(function(t){var u=moment(t.s),f=moment(t.e);i.push({id:"not",start:u,end:f,title:n.Title,rangeText:n.RangeText,allDay:r(u,f),backgroundColor:"#F3565D",resourceEditable:!1,editable:!1})})});f(i);v(t)},error:function(n){AGA.Helper.alert(AGA.Ajax.getErrorMessage(n))}})):f([])}},u=function(i){var r=c(i),u=t(i);$(u).find(n.calendarBody).fullCalendar("refetchEvents");r||h(i)},b=function(n){var t="AgaAgendas/Agendado?agenda="+n.value+"&_="+(new Date).getTime();t=AGA.Ajax.getUrlPath(t);$(".aga-schedule-scheduled").empty();$.get(t,function(t){$(".aga-schedule-scheduled").html(t);AGA.Lookup.initAll();u(n.currentTarget)})},k=function(n){u(n.currentTarget)},d=function(){AGA.log("AGA.Schedule.modalClose");Benner.WidgetCommandsBar.disposeModal();$(n.needUpdate).each(function(n,t){$(t).removeClass(i.needUpdate);u(t)})},l=function(n){AGA.log("AGA.Schedule.openModal");var t={url:n,id:"aga-schedule-modal",size:"large",height:750,displayFooter:!1,displayTitle:!1,title:""};Benner.ModalPage.show(t,Benner.WidgetCommandsBar.openModal,d)},g=function(n){return{header:{left:"title",center:"",right:"prev,next today,agendaDay,agendaWeek,month"},monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],timeFormat:"HH:mm ",axisFormat:"HH:mm",allDayText:"Hora",lazyFetching:!1,buttonText:{today:"Hoje",month:"Mês",week:"Semana",day:"Dia"},displayEventTime:!1,slotDuration:"00:15:00",scrollTime:"06:00:00",columnFormat:{day:"ddd DD/MM",week:"ddd DD/MM",month:"ddd"},titleFormat:{month:"MMMM/YYYY",day:"ddd - DD/MM/YYYY",week:"DD/MM/YYYY"},eventSources:[w(n)],eventRender:function(n,t){n.allDay&&$(t).find(".fc-time").addClass("hide");n.id==="not"&&$(t).find(".fc-time").text(n.start.format("HH:mm")+" - "+n.end.format("HH:mm"));n.endOfScale?$(t).css("border-bottom","solid 2px #F3565D"):$(t).css("border-bottom","solid 1px #eee")},eventClick:function(n){if(n.schedule){var t=s(n.schedule,n.id,n.person,n.start);l(t)}else AGA.Helper.alert("Indisponibilidade",p(n.rangeText,n.title))}}},nt=function(){$(".aga-calendar").each(function(t,r){$(r).removeClass(i.autoInit);$(r).find(n.calendarBody).fullCalendar(g(r));h(r)})},tt=function(){AGA.log("AGA.Schedule.needUpdate call");$(n.calendar).addClass(i.needUpdate)},it=function(n){var i=t(n),r=$(i).data("hash"),u=$(i).data("person"),f=s(r,"new",u);l(f)};return{initAll:nt,scheduleChanged:b,scheduledPersonChanged:k,needUpdate:tt,newEvent:it}}();$(document).ready(function(){AGA.Schedule.initAll()});$(document).ready(function(){$(".searcher-icon").length||$("#searcher-modal").remove()});AGATableExport=function(){function n(){return window.XLSX}function t(){if(!n()){var t="content/assets/amcharts/plugins/export/libs/";$(["fabric.js/fabric.min.js","FileSaver.js/FileSaver.min.js","jszip/jszip.min.js","xlsx/xlsx.min.js"]).each(function(n,i){AGA.Loader.load(t+i)})}}return{createAllLinks:function(){$("table").each(function(n,t){AGATableExport.createLink(t)})},createLink:function(n){var r=$(n).closest("table"),t=$(r).find("th:last-of-type"),i;t.children(".aga-table-export").length>0||(i=AGATableExport.buildLinkElement(),$(t).append(i))},buildLinkElement:function(){var i=document.createElement("div"),n,u,r,t;$(i).addClass("btn-group aga-table-export-group");n=document.createElement("a");$(n).addClass("btn btn-sm aga-table-export-btn").attr({href:"javascript:;","data-toggle":"dropdown","aria-expanded":"false","data-original-title":"Exportar tabela"}).appendTo(i);$(n).tooltip();u=document.createElement("i");$(u).addClass("fa fa-download").appendTo(n);r=document.createElement("ul");$(r).addClass("dropdown-menu pull-right").appendTo(i);t=document.createElement("li");$(t).appendTo(r);n=document.createElement("a");$(n).attr("href","javascript:;").text("XLSX").appendTo(t);$(t).on("click",AGATableExport.clickHandlerXLSX);t=document.createElement("li");$(t).appendTo(r);n=document.createElement("a");$(n).attr("href","javascript:;").text("CSV").appendTo(t);$(t).on("click",AGATableExport.clickHandlerCSV);return i},clickHandlerXLSX:function(i){t();var r=function(){if(n()){var t=$(i.target).closest("table"),u=AGATableExport.getData(t,AGATableExport.getNumberOrString);AGATableExport.saveXLSX(u,"tabela.xlsx")}else setTimeout(r,300)};r()},clickHandlerCSV:function(i){t();var r=function(){var t,e,o,u;if(n()){var h=$(i.target).closest("table"),f=AGATableExport.getData(h),s="";for(t=0;t<f.length;t++){for(e="",o="",u=0;u<f[t].length;u++)e+=o+'"'+f[t][u]+'"',o=";";s+="\n"+e}function c(n){for(var i=new ArrayBuffer(n.length),r=new Uint8Array(i),t=0;t!=n.length;++t)r[t]=n.charCodeAt(t)&255;return i}saveAs(new Blob([c(s)],{type:""}),"tabela.csv")}else setTimeout(r,300)};r()},getData:function(n,t){var i=[],r=[];return $(n).find("th:not(.column-action)").each(function(n,t){if(!$(t).hasClass("aga-export-ignore")){var i=t.firstChild?t.firstChild.textContent:t.textContent;r.push(i)}}),i.push(r),$(n).find("tr").each(function(n,r){var u=[];$(r).find("td:not(.column-action)").each(function(n,i){var r=$(i).text();t&&(r=t(r));u.push(r)});u.length>0&&i.push(u)}),i},getNumberOrString:function(n){var t;return/^[+-]?(\d*|\d{1,3}(\.\d{3})*)(\,\d+)?\b$/.test(n)?(t=n.replace(".",""),t=t.replace(",","."),parseFloat(t)):n},saveXLSX:function(n,t){function y(n){for(var i=new ArrayBuffer(n.length),r=new Uint8Array(i),t=0;t!=n.length;++t)r[t]=n.charCodeAt(t)&255;return i}var c="table",u={},i,r,f,l,h,a,v;u.Sheets={};u.Props={};u.SSF={};u.SheetNames=[];var s={},e=[],o={s:{c:0,r:0},e:{c:0,r:0}};for(i=0;i!=n.length;++i){for(o.e.r<i&&(o.e.r=i);e.length<n[i].length;)e.push({wch:10});for(r=0;r!=n[i].length;++r)(o.e.c<r&&(o.e.c=r),f={v:n[i][r]},f.v!=null)&&(l=XLSX.utils.encode_cell({c:r,r:i}),f.t=typeof f.v=="number"?"n":typeof f.v=="boolean"?"b":"s",s[l]=f,h=n[i][r]?n[i][r].toString().length:10,e[r].wch<h&&(e[r].wch=h))}s["!ref"]=XLSX.utils.encode_range(o);u.SheetNames.push(c);u.Sheets[c]=s;s["!cols"]=e;a={bookType:"xlsx",bookSST:!1,type:"binary"};v=XLSX.write(u,a);saveAs(new Blob([y(v)],{type:""}),t)}}}();