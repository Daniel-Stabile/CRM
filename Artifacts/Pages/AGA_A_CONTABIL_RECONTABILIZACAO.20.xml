<?xml version="1.0"?>
<PagePortable xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Title>Recontabilização</Title>
  <Url>~/aga/a/contabil/processos/Recontabilizacao.aspx</Url>
  <AutoGenerated>true</AutoGenerated>
  <EntityPermissionId />
  <TemplateId />
  <Details />
  <Id>AGA_A_CONTABIL_RECONTABILIZACAO</Id>
  <Level>Benner</Level>
  <CodeFile />
  <CodeInherits />
  <Widgets>
    <PageWidgetPortable>
      <Id>FILTROSRECONTABILIZAO</Id>
      <Title>Filtro</Title>
      <Order>10</Order>
      <ShowTitle>true</ShowTitle>
      <PortletCssClass />
      <FontIcon />
      <Subtitle />
      <ChromeState>Normal</ChromeState>
      <PortletLayout>Default</PortletLayout>
      <WidgetTypeId>AjaxForm</WidgetTypeId>
      <BootstrapCols>12</BootstrapCols>
      <XmlAttributes><![CDATA[<AjaxFormAttributes>
  <CanDelete>true</CanDelete>
  <CanUpdate>true</CanUpdate>
  <CanInsert>true</CanInsert>
  <EntityViewName>WEB_CT_RECONTABILIZACAO.CUSTOM.FORM</EntityViewName>
  <FormMode>0</FormMode>
  <IncludeRecordInRecentItems>true</IncludeRecordInRecentItems>
  <UserDefinedCommandsVisible>true</UserDefinedCommandsVisible>
</AjaxFormAttributes>
]]></XmlAttributes>
      <Level>Benner</Level>
    </PageWidgetPortable>
    <PageWidgetPortable>
      <Id>MOVIMENTOSRECONTABILIZAR</Id>
      <MasterWidgetId>FILTROSRECONTABILIZAO</MasterWidgetId>
      <Title>Movimentos a recontabilizar</Title>
      <Order>20</Order>
      <ShowTitle>true</ShowTitle>
      <PortletCssClass />
      <FontIcon />
      <Subtitle />
      <ChromeState>Fixed</ChromeState>
      <PortletLayout>Default</PortletLayout>
      <WidgetTypeId>ActionView</WidgetTypeId>
      <BootstrapCols>12</BootstrapCols>
      <XmlAttributes><![CDATA[<ActionViewAttributes>
  <Controller>MovimentosRecontabilizar</Controller>
  <Action>Movimento</Action>
</ActionViewAttributes>
]]></XmlAttributes>
      <Level>Benner</Level>
    </PageWidgetPortable>
  </Widgets>
  <Resources>
    <PageResourcePortable>
      <Id>98AB4F0C6ACC4988A22C160BC896ADD1</Id>
      <ResourceType>JavaScript</ResourceType>
      <Content><![CDATA[$(function(){
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    if (!prm.get_isInAsyncPostBack()) {
    
        prm.add_endRequest(function (sender, args) {
            var tblResultados = $('#ctl00_Main_MOVIMENTOSRECONTABILIZAR_ctl04').find('table');
            if (tblResultados.length === 0) {
                ExibirMensagemErro(true);
            }
        });
    }
    
    var htmlMensagem = '<div id="ctl00_Main_BALANOPATRIMONIAL_1_MsgUser" class="alert alert-warning"><button class="close" data-dismiss="alert"></button><span id="ctl00_Main_BALANOPATRIMONIAL_1_MsgUser_message">{0}</span></div>'
    
    function ExibirMensagemErro(exibir){
        if (exibir) {
            $('#ctl00_Main_FILTROSRECONTABILIZAO_toolbar').after(htmlMensagem.replace('{0}', $('#ctl00_Main_MOVIMENTOSRECONTABILIZAR_ctl04')[0].innerText));
            
            $('#ctl00_Main_BALANOPATRIMONIAL_1_MsgUser').show();
            
            $('#ctl00_Main_MOVIMENTOSRECONTABILIZAR_ctl04')[0].innerText = '';
        }
        else{
            $('#ctl00_Main_BALANOPATRIMONIAL_1_MsgUser').hide();
        }
    }
    
    ExibirMensagemErro(false);
});

function RecontabilizarDocumentos() {
	var temCheckado = $('tbody td input:checkbox:checked', $('#tblDados')).length > 0;
	
	$.ajax({
        type: "POST",
        dataType: 'json',
        url: Benner.Page.getApplicationPath() + 'MovimentosRecontabilizar/RecontabilizarDocumentos',
        data: { origem: parseFloat($('#ctl00_Main_FILTROSRECONTABILIZAO_PageControl_GERAL_GERAL_ORIGEMselect').val()) },
        cache: false,
        success: function (data) {
            if (data === true) {
                Benner.ModalMessage.alert('Sucesso!','Recontabilização executada com sucesso.', function(){});
            }
            else {
                Benner.ModalMessage.alert('Atenção!',data, function(){});
            }
        },
        error: function (xhr, textStatus, error) {
            console.log(error);
        },
        complete: function () {
        }
    });
}
]]></Content>
      <Level>Benner</Level>
    </PageResourcePortable>
    <PageResourcePortable>
      <Id>0549836933BD4E46AA20812A3EF78EBC</Id>
      <ResourceType>CSS</ResourceType>
      <Content><![CDATA[span.dtr-title {
    display: inline-block !important;
    min-width: 130px !important;
    font-weight: 400 !important;
    color: #333;
}
.dtr-data{color: #525E64;}
li{
    list-style-type: none !important;
    font-size: 12px!important;
    
}

#tblDados th{ width:auto!important}
#tblDados th, #tblDados td{font-size: 12px!important;}
]]></Content>
      <Level>Benner</Level>
    </PageResourcePortable>
  </Resources>
</PagePortable>