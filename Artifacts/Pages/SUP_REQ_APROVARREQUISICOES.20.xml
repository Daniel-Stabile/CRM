<?xml version="1.0"?>
<PagePortable xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Title>Aprovar requisições</Title>
  <Url>~/PortalInterno/e/Suprimentos/Requisicoes/AprovarRequisicoes.aspx</Url>
  <AutoGenerated>false</AutoGenerated>
  <EntityPermissionId />
  <TemplateId />
  <Details />
  <Id>SUP_REQ_APROVARREQUISICOES</Id>
  <Level>Benner</Level>
  <CodeFile />
  <CodeInherits>Benner.Corporativo.Wes.WebApp.PortalInterno.Requisicoes.AprovarRequisicoes</CodeInherits>
  <Widgets>
    <PageWidgetPortable>
      <Id>WIDGETID_635756866430259239</Id>
      <Title>Requisições&gt;&gt; listagem para aprovação</Title>
      <Order>10</Order>
      <ShowTitle>true</ShowTitle>
      <PortletCssClass />
      <FontIcon />
      <Subtitle />
      <ChromeState>Normal</ChromeState>
      <PortletLayout>Default</PortletLayout>
      <WidgetTypeId>SimpleGrid</WidgetTypeId>
      <BootstrapCols>12</BootstrapCols>
      <XmlAttributes><![CDATA[<SimpleGridAttributes>
  <CanDelete>false</CanDelete>
  <CanUpdate>false</CanUpdate>
  <CanInsert>false</CanInsert>
  <EntityViewName>PORTAL_INT_SUP_REQUISICOES_LISTAGEMAPROVACAO.GRID</EntityViewName>
  <Mode>0</Mode>
  <UserDefinedSelectColumnVisible>true</UserDefinedSelectColumnVisible>
  <UserDefinedPageSize>20</UserDefinedPageSize>
  <SystemFilterOnly>false</SystemFilterOnly>
  <DisplayRowCommand>false</DisplayRowCommand>
  <CompanyFilterMode>2</CompanyFilterMode>
  <UserDefinedCriteriaWhereClause>(
           A.LIBERADA = 'S'
           OR A.LIBERADA IS NULL
       )
       AND
       (
           A.STATUS IN(1)
       )
       AND
       (
           (
               A.GRUPODEASSINATURAS IS NULL
               AND A.CONFIRMANTE = @USUARIO
           )
           OR
           (
               A.GRUPODEASSINATURAS IN(SELECT C.HANDLE
                                         FROM CP_GRUPOALCADASINTEGRANTES B,
                                              CP_GRUPOALCADAS C
                                        WHERE B.GRUPO = C.HANDLE
                                              AND
                                              (
                                                  (
                                                      C.EHHIERARQUIA = 'S'
                                                      AND B.SEQUENCIA &gt;= A.SEQUENCIAALCADA
                                                  )
                                                  OR
                                                  (
                                                      C.EHHIERARQUIA &lt;&gt; 'S'
                                                      AND B.SEQUENCIA = A.SEQUENCIAALCADA
                                                  )
                                              )
                                              AND B.USUARIO = @USUARIO
                                              AND B.ATIVO = 'S'
                                      )
           )
           OR
           (
               A.GRUPODEASSINATURAS IN (SELECT D.GRUPO
                                          FROM CP_GRUPOALCADASUSUARIOS D,
                                               CP_GRUPOALCADASINTEGRANTES I,
                                               CP_GRUPOALCADAS G
                                         WHERE D.GRUPO = G.HANDLE
                                               AND I.GRUPO = G.HANDLE
                                               AND I.HANDLE = D.INTEGRANTE
                                               AND
                                               (
                                                   (
                                                       G.EHHIERARQUIA = 'S'
                                                       AND I.SEQUENCIA &gt;= A.SEQUENCIAALCADA
                                                   )
                                                   OR
                                                   (
                                                       G.EHHIERARQUIA = 'N'
                                                       AND I.SEQUENCIA = A.SEQUENCIAALCADA
                                                   )
                                               )
                                               AND D.USUARIOAUTORIZADO = @USUARIO
                                               AND I.USUARIO = D.USUARIO
                                               AND D.ATIVO = 'S'
                                               AND I.ATIVO = 'S'
                                               AND I.AUSENTE = 'S'
                                       )
           )
           OR
           (
               A.GRUPODEASSINATURAS IS NULL
               AND A.CONFIRMANTE IN (SELECT D.USUARIO
                                       FROM CP_GRUPOALCADASUSUARIOS D,
                                            CP_GRUPOALCADASINTEGRANTES I,
                                            CP_GRUPOALCADAS G
                                      WHERE D.GRUPO = G.HANDLE
                                            AND I.GRUPO = G.HANDLE
                                            AND I.HANDLE = D.INTEGRANTE
                                            AND D.USUARIOAUTORIZADO = @USUARIO
                                            AND I.USUARIO = D.USUARIO
                                            AND D.ATIVO = 'S'
                                            AND I.ATIVO = 'S'
                                            AND I.AUSENTE = 'S'
                                    )
           )
           OR
           (
               @USUARIO IN (SELECT B.USUARIO
                              FROM PD_ASSINATURAS B,
                                   CP_GRUPOALCADASINTEGRANTES C,
                                   CP_GRUPOALCADAS D
                             WHERE B.REQUISICAOPAI = A.HANDLE
                                   AND C.GRUPO = A.GRUPODEASSINATURAS
                                   AND D.HANDLE = C.GRUPO
                                   AND
                                   (
                                       (
                                           D.EHHIERARQUIA = 'S'
                                           AND B.SEQUENCIA &gt;= A.SEQUENCIAALCADA
                                       )
                                       OR
                                       (
                                           D.EHHIERARQUIA &lt;&gt; 'S'
                                           AND B.SEQUENCIA = A.SEQUENCIAALCADA
                                       )
                                   )
                                   AND C.ATIVO = 'S'
                                   AND C.AUSENTE = 'N'
                                   AND C.TABTIPO = 2
                           )
           )
           OR
           (
               @USUARIO IN (SELECT B.USUARIO
                              FROM GN_PLANOHIERARQUIAUSUARIOS B,
                                   GN_PLANOHIERARQUIAINTEGRANTES C,
                                   PD_ASSINATURAS D,
                                   CP_GRUPOALCADASINTEGRANTES E,
                                   CP_GRUPOALCADAS F
                             WHERE C.HANDLE = B.INTEGRANTE
                                   AND
                                   (
                                       D.REQUISICAOPAI = A.HANDLE
                                       AND D.USUARIO = C.USUARIO
                                   )
                                   AND E.GRUPO = A.GRUPODEASSINATURAS
                                   AND F.HANDLE = E.GRUPO
                                   AND
                                   (
                                       (
                                           F.EHHIERARQUIA = 'S'
                                           AND D.SEQUENCIA &gt;= A.SEQUENCIAALCADA
                                       )
                                       OR
                                       (
                                           F.EHHIERARQUIA &lt;&gt; 'S'
                                           AND D.SEQUENCIA = A.SEQUENCIAALCADA
                                       )
                                   )
                                   AND E.TABTIPO = 2
                                   AND C.AUSENTE = 'S'
                                   AND B.ATIVO = 'S'
                           )
           )
       )</UserDefinedCriteriaWhereClause>
  <FormUrl>~/PortalInterno/e/Suprimentos/Requisicoes/AprovarRequisicao.aspx</FormUrl>
  <ShowExport>true</ShowExport>
  <UserDefinedDisableRowSelection>true</UserDefinedDisableRowSelection>
</SimpleGridAttributes>]]></XmlAttributes>
      <Level>Benner</Level>
    </PageWidgetPortable>
  </Widgets>
  <Resources />
</PagePortable>