<?xml version="1.0"?>
<DataSourcePortable xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Identifier>INDICADOR_MATERIAIS_TOP_PRODUTOS_ESTOCADOS</Identifier>
  <Name>Indicadores materiais - Top produtos mais estocados</Name>
  <Content><![CDATA[<DataSourceDefinition>
  <FromSql Alias="A" SelectCommand="SELECT SUM(A.VALORESTOQUEFINAL) VALORESTOQUEFINAL, &#xA;       (CASE &#xA;            WHEN PD_PRODUTOVARIACOESMESTRE.CONJUNTOVARIACOES = NULL THEN PD_PRODUTOS.NOME&#xA;            WHEN PD_PRODUTOVARIACOESMESTRE.CONJUNTOVARIACOES &lt;&gt; NULL THEN (@CONCATENAR(@CONCATENAR(PD_PRODUTOS.NOME, ' - '), PD_PRODUTOVARIACOESMESTRE.CONJUNTOVARIACOES))&#xA;        END) PRODUTO,&#xA;       (CASE &#xA;            WHEN (SELECT SUM(A.VALORESTOQUEFINAL) FROM PD_DWINDICADORTOP A&#xA;                JOIN PD_DWINDICADORES ON PD_DWINDICADORES.HANDLE = A.DWINDICADOR&#xA;                WHERE @CRITERIOSELECAO AND A.PRODUTO &lt;&gt; NULL AND A.VARIACAO &lt;&gt; NULL AND A.TIPO = 2) = 0 THEN 0&#xA;            WHEN (SELECT SUM(A.VALORESTOQUEFINAL) FROM PD_DWINDICADORTOP A&#xA;                JOIN PD_DWINDICADORES ON PD_DWINDICADORES.HANDLE = A.DWINDICADOR&#xA;                WHERE @CRITERIOSELECAO AND A.PRODUTO &lt;&gt; NULL AND A.VARIACAO &lt;&gt; NULL AND A.TIPO = 2) &gt; 0 THEN (SUM(A.VALORESTOQUEFINAL) * 100)/ (SELECT SUM(A.VALORESTOQUEFINAL) FROM PD_DWINDICADORTOP A&#xA;            JOIN PD_DWINDICADORES ON PD_DWINDICADORES.HANDLE = A.DWINDICADOR&#xA;            WHERE @CRITERIOSELECAO AND A.PRODUTO &lt;&gt; NULL AND A.VARIACAO &lt;&gt; NULL AND A.TIPO = 2)&#xA;        END) PERCENTUAL&#xA;    FROM PD_DWINDICADORTOP A &#xA;    JOIN PD_DWINDICADORES ON PD_DWINDICADORES.HANDLE = A.DWINDICADOR&#xA;    JOIN PD_PRODUTOS ON PD_PRODUTOS.HANDLE = A.PRODUTO&#xA;    JOIN PD_PRODUTOVARIACOESMESTRE ON PD_PRODUTOVARIACOESMESTRE.HANDLE = A.VARIACAO&#xA;WHERE @CRITERIOSELECAO AND A.PRODUTO &lt;&gt; NULL AND A.VARIACAO &lt;&gt; NULL AND A.TIPO = 2&#xA;    GROUP BY PD_PRODUTOS.NOME, A.PRODUTO, A.VARIACAO, PD_PRODUTOVARIACOESMESTRE.CONJUNTOVARIACOES&#xA;    ORDER BY VALORESTOQUEFINAL DESC" />
  <Fields>
    <DecimalField Alias="VALORESTOQUEFINAL" From="A" Path="VALORESTOQUEFINAL" FieldDecimalsFormat="2" />
    <Field Alias="PRODUTO" From="A" Path="PRODUTO" />
    <DecimalField Alias="PERCENTUAL" From="A" Path="PERCENTUAL" FieldDecimalsFormat="2" />
  </Fields>
</DataSourceDefinition>
]]></Content>
  <Level>Benner</Level>
  <ContemDadosPessoaisLgpd>false</ContemDadosPessoaisLgpd>
  <ExibirNaApi>true</ExibirNaApi>
</DataSourcePortable>