<?xml version="1.0"?>
<DataSourcePortable xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Identifier>ITENSFATURARNOTAFISCALGRID</Identifier>
  <Name>Itens a faturar</Name>
  <Content><![CDATA[<DataSourceDefinition>
  <FromSql Alias="A" SelectCommand="&#xD;&#xA;SELECT A.* FROM(&#xD;&#xA;SELECT 1 TIPO,&#xD;&#xA;       DOC.HANDLE DOCHANDLE,&#xD;&#xA;       DOC.EMPRESA EMPRESAHANDLE,&#xD;&#xA;       DOC.FILIAL FILIALHANDLE,&#xD;&#xA;       DOC.PESSOA PESSOAHANDLE,&#xD;&#xA;       EMP.NOME EMPRESA,&#xD;&#xA;       FIL.NOME FILIAL,&#xD;&#xA;       PES.NOME PESSOA,&#xD;&#xA;       LIB.HANDLE HANDLE,&#xD;&#xA;       '' DOCUMENTO,&#xD;&#xA;       DOC.NUMEROOV NUMEROOV,&#xD;&#xA;       PRO.CODIGOREFERENCIA,&#xD;&#xA;       PRO.NOME,&#xD;&#xA;       UNIDADE.ABREVIATURA UNIDADE,&#xD;&#xA;       LIB.QUANTIDADE,&#xD;&#xA;       ITEM.VALORUNITARIO,&#xD;&#xA;       LIB.VALOR,&#xD;&#xA;       LIB.DATA DATALIBERACAO,&#xD;&#xA;       ENT.DATA DATAENTREGA,&#xD;&#xA;       OPEFAT.NOME OPERACAOFATURAMENTO&#xD;&#xA;  FROM CM_ORDEMVENDALIBERACOES LIB&#xD;&#xA;  JOIN CM_ORDEMVENDAITENS ITEM ON LIB.ORDEMVENDAITEM = ITEM.HANDLE&#xD;&#xA;  JOIN CM_ORDENSVENDA DOC ON DOC.HANDLE = ITEM.ORDEMVENDA&#xD;&#xA;  JOIN PD_PRODUTOS PRO ON ITEM.PRODUTO = PRO.HANDLE&#xD;&#xA;  JOIN EMPRESAS EMP ON DOC.EMPRESA = EMP.HANDLE&#xD;&#xA;  JOIN FILIAIS FIL ON DOC.FILIAL = FIL.HANDLE&#xD;&#xA;  JOIN GN_PESSOAS PES ON DOC.PESSOA = PES.HANDLE&#xD;&#xA;  LEFT JOIN CM_UNIDADESMEDIDA UNIDADE ON UNIDADE.HANDLE = LIB.UNIDADE&#xD;&#xA;  JOIN CM_OPERACOESFATURAMENTO OPEFAT ON OPEFAT.HANDLE = DOC.OPERACAOFATURAMENTO&#xD;&#xA;  JOIN CM_ORDEMVENDAENTREGAS ENT ON ENT.HANDLE = LIB.ITEMENTREGA&#xD;&#xA;  LEFT OUTER JOIN CM_PARAMETROS PAR ON PAR.FILIAL = PRO.FILIAL&#xD;&#xA; WHERE (DOC.STATUS = 2 OR DOC.STATUS = 3)&#xD;&#xA;   AND LIB.FATURADO = 'N'&#xD;&#xA;   AND (PAR.UTILIZACONTAGEMSEPARACAO = 'N' OR (PAR.UTILIZACONTAGEMSEPARACAO = 'S' AND LIB.STATUSSEPARACAO = 5))&#xD;&#xA;&#xD;&#xA;UNION ALL&#xD;&#xA;&#xD;&#xA;SELECT 2 TIPO,&#xD;&#xA;       DOC.HANDLE DOCHANDLE,&#xD;&#xA;       DOC.EMPRESA EMPRESAHANDLE,&#xD;&#xA;       DOC.FILIAL FILIALHANDLE,&#xD;&#xA;       DOC.PESSOA PESSOAHANDLE,&#xD;&#xA;       EMP.NOME EMPRESA,&#xD;&#xA;       FIL.NOME FILIAL,&#xD;&#xA;       PES.NOME PESSOA,&#xD;&#xA;       LIB.HANDLE HANDLE,&#xD;&#xA;       DOC.NUMERO DOCUMENTO,&#xD;&#xA;       0 NUMEROOV,&#xD;&#xA;       PRO.CODIGOREFERENCIA,&#xD;&#xA;       PRO.NOME,&#xD;&#xA;       UNIDADE.ABREVIATURA UNIDADE,&#xD;&#xA;       LIB.QUANTIDADE,&#xD;&#xA;       ITEM.VALORUNITARIO,&#xD;&#xA;       LIB.VALOR,&#xD;&#xA;       LIB.DATA DATALIBERACAO,&#xD;&#xA;       NULL DATAENTREGA,&#xD;&#xA;       OPEFAT.NOME OPERACAOFATURAMENTO&#xD;&#xA;  FROM CM_ORDEMVENDALIBERACOES LIB&#xD;&#xA;  JOIN CM_CONTRATOITENS ITEM ON LIB.ITEMCONTRATO = ITEM.HANDLE&#xD;&#xA;  JOIN CM_CONTRATOS DOC ON DOC.HANDLE = ITEM.CONTRATO&#xD;&#xA;  JOIN PD_PRODUTOS PRO ON ITEM.PRODUTO = PRO.HANDLE&#xD;&#xA;  JOIN EMPRESAS EMP ON DOC.EMPRESA = EMP.HANDLE&#xD;&#xA;  JOIN FILIAIS FIL ON DOC.FILIAL = FIL.HANDLE&#xD;&#xA;  JOIN GN_PESSOAS PES ON DOC.PESSOA = PES.HANDLE&#xD;&#xA;  LEFT JOIN CM_UNIDADESMEDIDA UNIDADE ON UNIDADE.HANDLE = LIB.UNIDADE&#xD;&#xA;  JOIN CM_OPERACOESFATURAMENTO OPEFAT ON OPEFAT.HANDLE = DOC.OPERACAOFATURAMENTO&#xD;&#xA; WHERE (DOC.STATUSCONTRATO = 2 AND DOC.EHCONTRATO ='S' AND DOC.TIPOREGISTRO = 1)&#xD;&#xA;   AND LIB.FATURADO = 'N'&#xD;&#xA;) A&#xD;&#xA;ORDER BY A.TIPO, A.DOCUMENTO, A.CODIGOREFERENCIA&#xD;&#xA;" />
  <Fields>
    <Field Alias="TIPO" From="A" Path="TIPO" />
    <Field Alias="DOCHANDLE" From="A" Path="DOCHANDLE" />
    <Field Alias="EMPRESAHANDLE" From="A" Path="EMPRESAHANDLE" />
    <Field Alias="FILIALHANDLE" From="A" Path="FILIALHANDLE" />
    <Field Alias="PESSOAHANDLE" From="A" Path="PESSOAHANDLE" />
    <Field Alias="EMPRESA" From="A" Path="EMPRESA" />
    <Field Alias="FILIAL" From="A" Path="FILIAL" />
    <Field Alias="PESSOA" From="A" Path="PESSOA" />
    <Field Alias="HANDLE" From="A" Path="HANDLE" />
    <Field Alias="DOCUMENTO" From="A" Path="DOCUMENTO" />
    <Field Alias="NUMEROOV" From="A" Path="NUMEROOV" />
    <Field Alias="CODIGOREFERENCIA" From="A" Path="CODIGOREFERENCIA" />
    <Field Alias="NOME" From="A" Path="NOME" />
    <Field Alias="UNIDADE" From="A" Path="UNIDADE" />
    <Field Alias="QUANTIDADE" From="A" Path="QUANTIDADE" />
    <Field Alias="VALORUNITARIO" From="A" Path="VALORUNITARIO" />
    <Field Alias="VALOR" From="A" Path="VALOR" />
    <DateField Alias="DATALIBERACAO" From="A" Path="DATALIBERACAO" FieldDateFormat="DayMonthYear" FieldTimeFormat="HourMinuteSecond" />
    <DateField Alias="DATAENTREGA" From="A" Path="DATAENTREGA" FieldDateFormat="DayMonthYear" FieldTimeFormat="HourMinuteSecond" />
    <Field Alias="OPERACAOFATURAMENTO" From="A" Path="OPERACAOFATURAMENTO" />
  </Fields>
</DataSourceDefinition>]]></Content>
  <Level>Benner</Level>
  <ContemDadosPessoaisLgpd>false</ContemDadosPessoaisLgpd>
  <ExibirNaApi>true</ExibirNaApi>
</DataSourcePortable>