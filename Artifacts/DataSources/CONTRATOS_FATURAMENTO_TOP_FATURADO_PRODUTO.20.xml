<?xml version="1.0"?>
<DataSourcePortable xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Identifier>CONTRATOS_FATURAMENTO_TOP_FATURADO_PRODUTO</Identifier>
  <Name>Indicadores contratos faturamento - Top faturamento produtos</Name>
  <Content><![CDATA[<DataSourceDefinition>
  <FromSql Alias="A" SelectCommand="SELECT PRODUTO.NOME,&#xD;&#xA;       CONSULTA_TOP_FAT_PROD.FATURADO_PRODUTO,&#xD;&#xA;       ROUND(((CONSULTA_TOP_FAT_PROD.FATURADO_PRODUTO*100)/CONSULTA_TOP_FAT_PROD.FATURADO_COMPETENCIA),2) PERCENT_FATURADO_TOTAL FROM&#xD;&#xA;(SELECT CONSULTA_VALORES_PRODUTO.FATURADO_PRODUTO, CONSULTA_VALORES_PRODUTO.PRODUTO,&#xD;&#xA;    (SELECT SUM(CN_DWINDICADORVALORES.VALOR) AS FATURADO &#xD;&#xA;       FROM CN_DWINDICADORVALORES &#xD;&#xA;       JOIN CN_DWINDICADORES ON (CN_DWINDICADORES.HANDLE = CN_DWINDICADORVALORES.COLETA AND CN_DWINDICADORES.TIPOCOLETA = 1)&#xD;&#xA;      WHERE CN_DWINDICADORVALORES.TIPO = 2 AND CN_DWINDICADORES.COLETAPARCIAL = 'N' AND @CRITERIOSELECAO) AS FATURADO_COMPETENCIA FROM&#xD;&#xA;(SELECT SUM(CN_DWINDICADOROBJETOS.VALOR) as FATURADO_PRODUTO, CN_DWINDICADOROBJETOS.PRODUTO &#xD;&#xA;   FROM CN_DWINDICADOROBJETOS&#xD;&#xA;   JOIN CN_DWINDICADORVALORES ON CN_DWINDICADORVALORES.HANDLE = CN_DWINDICADOROBJETOS.INDICADOR&#xD;&#xA;   JOIN CN_DWINDICADORES ON (CN_DWINDICADORES.HANDLE = CN_DWINDICADORVALORES.COLETA AND CN_DWINDICADORES.TIPOCOLETA = 1)&#xD;&#xA;  WHERE CN_DWINDICADORVALORES.TIPO = 2 AND CN_DWINDICADORES.COLETAPARCIAL = 'N' AND @CRITERIOSELECAO&#xD;&#xA;  GROUP BY CN_DWINDICADOROBJETOS.PRODUTO) CONSULTA_VALORES_PRODUTO) CONSULTA_TOP_FAT_PROD&#xD;&#xA;JOIN PD_PRODUTOS PRODUTO ON CONSULTA_TOP_FAT_PROD.PRODUTO = PRODUTO.HANDLE&#xD;&#xA;ORDER BY FATURADO_PRODUTO DESC" />
  <Fields>
    <Field Alias="NOME" From="A" Path="NOME" />
    <Field Alias="FATURADO_PRODUTO" From="A" Path="FATURADO_PRODUTO" />
    <Field Alias="PERCENT_FATURADO_TOTAL" From="A" Path="PERCENT_FATURADO_TOTAL" />
  </Fields>
</DataSourceDefinition>]]></Content>
  <Level>Benner</Level>
  <ContemDadosPessoaisLgpd>false</ContemDadosPessoaisLgpd>
  <ExibirNaApi>true</ExibirNaApi>
</DataSourcePortable>