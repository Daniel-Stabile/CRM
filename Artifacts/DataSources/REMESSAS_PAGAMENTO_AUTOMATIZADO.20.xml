<?xml version="1.0"?>
<DataSourcePortable xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Identifier>REMESSAS_PAGAMENTO_AUTOMATIZADO</Identifier>
  <Name>Pagamento automatizado</Name>
  <Content><![CDATA[<DataSourceDefinition>
  <FromSql Alias="A" SelectCommand="SELECT A.CODIGO HANDLE, D.ARQUIVOGERADO, 'PREREMESSA' TIPO, NULL HANDLEREMESSA, A.HANDLE HANDLEPREREMESSA, A.STATUS, A.CODIGO, A.CRIADOEM, E.NOME CONTA, F.NOME SERVICO, COUNT(B.HANDLE) TITULOS, A.VALORTOTAL VALOR, A.VALORLIQUIDOTOTAL VALORLIQUIDO, D.TRANSFERENCIA FROM GN_PREREMESSAS A&#xD;&#xA;LEFT JOIN FN_PARCELAPREREMESSAS B ON B.PREREMESSA = A.HANDLE&#xD;&#xA;LEFT JOIN FN_PARCELAS C ON C.HANDLE = B.PARCELA&#xD;&#xA;LEFT JOIN GN_HBREMESSAS D ON D.HANDLE = A.REMESSAGERADA&#xD;&#xA;LEFT JOIN FN_CONTASTESOURARIA E ON E.HANDLE = A.CONTACORRENTE&#xD;&#xA;LEFT JOIN GN_HBENTIDADESERVICO F ON F.HANDLE = A.SERVICO&#xD;&#xA;WHERE A.REMESSAGERADA IS NULL AND (A.FILIAL IN @FILIAIS OR A.FILIAL IS NULL)&#xD;&#xA;GROUP BY A.CODIGO, E.NOME, D.ARQUIVOGERADO, F.NOME, A.STATUS, A.CRIADOEM, A.VALORTOTAL, A.VALORLIQUIDOTOTAL, A.HANDLE, D.TRANSFERENCIA&#xD;&#xA;&#xD;&#xA;UNION &#xD;&#xA;&#xD;&#xA;SELECT A.CODIGO HANDLE, A.ARQUIVOGERADO, 'REMESSA' TIPO, A.HANDLE HANDLEREMESSA, NULL HANDLEPREREMESSA, G.STATUS, A.CODIGO, A.DATA CRIADOEM, E.NOME CONTA, F.NOME SERVICO, CASE WHEN A.TRANSFERENCIA = 'S' THEN COUNT(L.HANDLE) ELSE A.TOTALTITULOS END AS TITULOS, A.VALORTOTAL VALOR, A.VALORLIQUIDOTOTAL VALORLIQUIDO, A.TRANSFERENCIA FROM GN_HBREMESSAS A&#xD;&#xA;LEFT JOIN FN_PARCELAREMESSAS B ON B.REMESSA = A.HANDLE&#xD;&#xA;LEFT JOIN FN_PARCELAS C ON C.HANDLE = B.PARCELA&#xD;&#xA;LEFT JOIN FN_CONTASTESOURARIA E ON E.HANDLE = A.CONTACORRENTE&#xD;&#xA;LEFT JOIN GN_HBENTIDADESERVICO F ON F.HANDLE = A.SERVICO&#xD;&#xA;LEFT JOIN GN_PREREMESSAS G ON G.REMESSAGERADA = A.HANDLE&#xD;&#xA;LEFT JOIN TS_LANCAMENTOS L ON L.REMESSA = A.HANDLE&#xD;&#xA;WHERE A.TIPO = 'P' AND (A.FILIAL IN @FILIAIS OR A.FILIAL IS NULL)&#xD;&#xA;GROUP BY A.CODIGO, E.NOME, F.NOME, A.ARQUIVOGERADO, A.DATA, A.TOTALTITULOS, A.VALORTOTAL, A.VALORLIQUIDOTOTAL, A.HANDLE, G.STATUS, A.TRANSFERENCIA" />
  <Fields>
    <Field Alias="HANDLE" From="A" Path="HANDLE" />
    <Field Alias="ARQUIVOGERADO" From="A" Path="ARQUIVOGERADO" />
    <Field Alias="TIPO" From="A" Path="TIPO" />
    <Field Alias="HANDLEREMESSA" From="A" Path="HANDLEREMESSA" />
    <Field Alias="HANDLEPREREMESSA" From="A" Path="HANDLEPREREMESSA" />
    <Field Alias="STATUS" From="A" Path="STATUS" />
    <Field Alias="CODIGO" From="A" Path="CODIGO" />
    <DateField Alias="CRIADOEM" From="A" Path="CRIADOEM" FieldDateFormat="DayMonthYear" FieldTimeFormat="HourMinuteSecond" />
    <Field Alias="CONTA" From="A" Path="CONTA" />
    <Field Alias="SERVICO" From="A" Path="SERVICO" />
    <Field Alias="TITULOS" From="A" Path="TITULOS" />
    <Field Alias="VALOR" From="A" Path="VALOR" />
    <Field Alias="VALORLIQUIDO" From="A" Path="VALORLIQUIDO" />
    <Field Alias="TRANSFERENCIA" From="A" Path="TRANSFERENCIA" />
  </Fields>
</DataSourceDefinition>
]]></Content>
  <Level>Benner</Level>
  <ContemDadosPessoaisLgpd>false</ContemDadosPessoaisLgpd>
  <ExibirNaApi>true</ExibirNaApi>
</DataSourcePortable>