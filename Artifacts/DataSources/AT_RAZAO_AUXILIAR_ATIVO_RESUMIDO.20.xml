<?xml version="1.0"?>
<DataSourcePortable xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Identifier>AT_RAZAO_AUXILIAR_ATIVO_RESUMIDO</Identifier>
  <Name>Raz√£o auxiliar do ativo (resumido)</Name>
  <Content><![CDATA[<DataSourceDefinition>
  <FromSql Alias="A" SelectCommand="SELECT ATTOT.DATA,&#xD;&#xA;CTA.HANDLE CONTACONTABIL, CTA.ESTRUTURA ESTRUTURACONTA, CTA.NOME NOMECONTA,&#xD;&#xA;COALESCE(ATTOT.VALORATUALIZADO,0) - COALESCE(ATTOT.VALORBAIXA,0) VALORATIVO,&#xD;&#xA;COALESCE(SALDOANTERIOR.SALDO,0) + COALESCE(CTTOT.MOVIMENTO,0) VALORCONTABIL&#xD;&#xA;FROM (&#xD;&#xA;   SELECT ATTOT.CONTA, ATTOT.DATA, SUM(ATTOT.VALORATUALIZADO) VALORATUALIZADO, SUM(ATTOT.VALORBAIXA) VALORBAIXA&#xD;&#xA;     FROM AT_CONTATOTAIS ATTOT&#xD;&#xA;    WHERE ATTOT.EMPRESA = @EMPRESA&#xD;&#xA;      AND ATTOT.DATA = @MES[2]&#xD;&#xA;    GROUP BY ATTOT.CONTA, ATTOT.DATA&#xD;&#xA;) ATTOT&#xD;&#xA;&#xD;&#xA;JOIN CT_CONTAS CTA ON CTA.HANDLE = ATTOT.CONTA&#xD;&#xA;&#xD;&#xA;LEFT JOIN (&#xD;&#xA;       SELECT CTTOT.COMPETENCIA, CTA.HANDLE CONTA, SUM(CTTOT.DEBITOS) - SUM(CTTOT.CREDITOS) MOVIMENTO&#xD;&#xA;         FROM CT_CONTATOTAIS CTTOT&#xD;&#xA;         JOIN CT_CONTAS CTA ON CTA.HANDLE = CTTOT.CONTA&#xD;&#xA;        WHERE CTTOT.EMPRESA = @EMPRESA&#xD;&#xA;          AND CTA.IMOBILIZADO = 2&#xD;&#xA;          AND CTA.ULTIMONIVEL = 'S'&#xD;&#xA;          AND CTTOT.COMPETENCIA = @MES[1]&#xD;&#xA;          AND CTTOT.TIPO = 'N'&#xD;&#xA;        GROUP BY CTTOT.COMPETENCIA, CTA.HANDLE&#xD;&#xA;) CTTOT ON CTTOT.COMPETENCIA = (ATTOT.DATA - @DATAPARTE(DIA, ATTOT.DATA) + 1) AND CTTOT.CONTA = ATTOT.CONTA&#xD;&#xA;LEFT JOIN (&#xD;&#xA;        SELECT SDOANT.CONTA, SUM(SDOANT.DEBITOS) - SUM(SDOANT.CREDITOS) SALDO&#xD;&#xA;          FROM CT_CONTATOTAIS SDOANT&#xD;&#xA;          JOIN CT_CONTAS CTA ON CTA.HANDLE = SDOANT.CONTA&#xD;&#xA;         WHERE SDOANT.EMPRESA = @EMPRESA&#xD;&#xA;           AND SDOANT.COMPETENCIA &gt;= (SELECT MAX(ABE.COMPETENCIA) FROM CT_CONTATOTAIS ABE WHERE ABE.EMPRESA = @EMPRESA AND ABE.TIPO = 'A' AND ABE.COMPETENCIA &lt; @MES[1])&#xD;&#xA;           AND SDOANT.COMPETENCIA &lt; @MES[1]&#xD;&#xA;           AND SDOANT.TIPO IN ('A', 'N')&#xD;&#xA;           AND CTA.IMOBILIZADO = 2&#xD;&#xA;          GROUP BY SDOANT.CONTA&#xD;&#xA;) SALDOANTERIOR ON SALDOANTERIOR.CONTA = ATTOT.CONTA&#xD;&#xA;" />
  <Fields>
    <Field Alias="DATA" From="A" Path="DATA" />
    <Field Alias="CONTACONTABIL" From="A" Path="CONTACONTABIL" />
    <Field Alias="ESTRUTURACONTA" From="A" Path="ESTRUTURACONTA" />
    <Field Alias="NOMECONTA" From="A" Path="NOMECONTA" />
    <Field Alias="VALORATIVO" From="A" Path="VALORATIVO" />
    <Field Alias="VALORCONTABIL" From="A" Path="VALORCONTABIL" />
  </Fields>
</DataSourceDefinition>
]]></Content>
  <Level>Benner</Level>
  <ContemDadosPessoaisLgpd>false</ContemDadosPessoaisLgpd>
  <ExibirNaApi>true</ExibirNaApi>
</DataSourcePortable>